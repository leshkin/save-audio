import{r as f,o as k,a as y,c as m,b as c,t as L,u,w as M,v as A,i as B,F as O,d as R,g as S,e as U,s as b,f as j,h as C}from"./vendor.97ca4836.js";const D=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function l(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=l(e);fetch(e.href,t)}};D();const F={class:"mx-auto max-w-md"},N={class:"my-7 text-center text-xl"},I={class:"flex flex-row justify-center items-center"},P=["disabled"],T=["disabled"],q={class:"flex flex-row justify-center items-center"},E=["src"],K=["onClick"],V={setup(w){let a=f(""),l=f(!1),r=new Set,e=new Map,t=f([]),i=f(void 0);async function g(){const s=await navigator.storage.estimate();i.value=((s.quota-s.usage)/1e6).toFixed(0)+"MB"}async function h(){const s=await S("keys");if(s){r=s;const n=Array.from(r),o=await U(n);for(let d=0;d<n.length;d++)e.set(n[d],URL.createObjectURL(o[d])),p()}}k(async()=>{await g(),await h()});async function v(){l.value=!0;let n=await(await fetch(a.value)).blob();const o=x();r.add(o),await b(o,n),await b("keys",r),e.set(o,URL.createObjectURL(n)),p(),g(),l.value=!1,a.value=""}async function _(s){await j(s),e.delete(s),p(),r.delete(s),await b("keys",r)}function x(){return String(new Date().getTime())}function p(){t.value=[];for(let s of e)t.value.push({key:s[0],value:s[1]})}return(s,n)=>(y(),m("div",F,[c("h1",N,L(u(i))+" free storage space",1),c("div",I,[M(c("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>B(a)?a.value=o:a=o),type:"text",class:"border-2 py-2 px-4 mx-4 rounded",placeholder:"Insert URL to MP3 file with the allowed CORS",disabled:u(l)},null,8,P),[[A,u(a)]]),c("button",{class:"bg-sky-500 text-white font-bold py-2 px-4 rounded disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed",onClick:v,disabled:u(l)},"Add mp3",8,T)]),(y(!0),m(O,null,R(u(t),o=>(y(),m("div",q,[c("audio",{controls:"",src:o.value,class:"m-3"},null,8,E),c("button",{class:"text-red-500 font-bold py-2 px-4 rounded cursor-pointer border-2 border-red-500",onClick:d=>_(o.key)},"X",8,K)]))),256))]))}};C(V).mount("#app");
